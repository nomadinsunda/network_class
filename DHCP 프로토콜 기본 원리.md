# π“΅ DHCP μ™„μ „ μ •λ³µ: IP μ£Όμ†λ” μ–΄λ–»κ² μλ™μΌλ΅ ν• λ‹Ήλ κΉ?

> λ„¤νΈμ›ν¬ μ—”μ§€λ‹μ–΄, μ‹μ¤ν… κ΄€λ¦¬μ, λ°±μ—”λ“ κ°λ°μλ¥Ό μ„ν• DHCP(Dynamic Host Configuration Protocol)μ μ „λ¬Έκ°€ μμ¤€ μ΄ν•΄

---

## π§­ λ“¤μ–΄κ°€λ©°: μ™ DHCPκ°€ ν•„μ”ν•κ°€?

μ°λ¦¬κ°€ μΈν„°λ„·μ— μ ‘μ†ν•  λ•, λ§μΉ ν΄λ€μ „ν™”μ— κ³ μ  μ „ν™”λ²νΈκ°€ μλ“― \*\*μΈν„°λ„·μ—μ„λ„ κ³ μ  μ£Όμ†(IP μ£Όμ†)\*\*κ°€ ν•„μ”ν•©λ‹λ‹¤. κ·Έλ°λ° μ΄ IP μ£Όμ†λ¥Ό **μλ™μΌλ΅ λ§¤λ² μ„¤μ •ν•λ‹¤λ©΄ μ–Όλ§λ‚ λ²κ±°λ΅μΈκΉμ”?**

μ΄λ¥Ό μλ™ν™”ν• ν”„λ΅ν† μ½μ΄ λ°”λ΅ \*\*DHCP(Dynamic Host Configuration Protocol)\*\*μ…λ‹λ‹¤.

---

## π“ DHCPλ€?

DHCPλ” **IP μ£Όμ†μ™€ λ„¤νΈμ›ν¬ μ„¤μ •μ„ μλ™μΌλ΅ ν• λ‹Ή**ν•λ” ν”„λ΅ν† μ½μ…λ‹λ‹¤.
μ΄λ” **RFC 2131**μ— μν•΄ μ •μλμ–΄ μμΌλ©°, μΌλ°μ μΌλ΅ λ‹¤μ μ •λ³΄λ¥Ό μ κ³µν•©λ‹λ‹¤:

* IP μ£Όμ†
* μ„λΈλ„· λ§μ¤ν¬ (Subnet Mask)
* κΈ°λ³Έ κ²μ΄νΈμ›¨μ΄ (Default Gateway)
* DNS μ„λ²„ μ£Όμ†
* μ„λ€ κΈ°κ°„(Lease Time)

> β… DHCPλ” "μ„λ€(Lease)" κ°λ…μ„ κΈ°λ°μΌλ΅ μ‘λ™ν•©λ‹λ‹¤. μ¦‰, **IP μ£Όμ†λ¥Ό μκµ¬ν μ£Όλ” κ²ƒμ΄ μ•„λ‹λΌ μΌμ • μ‹κ°„ λ™μ•λ§ μ‚¬μ©**ν•λ„λ΅ ν—μ©ν•©λ‹λ‹¤.

---

## π§ DHCPμ ν•µμ‹¬ κ°λ…

| κ°λ…                     | μ„¤λ…                               |
| ---------------------- | -------------------------------- |
| **DHCP μ„λ²„**            | IP μ£Όμ†μ™€ κΈ°νƒ€ λ„¤νΈμ›ν¬ μ„¤μ •μ„ ν• λ‹Ήν•΄μ£Όλ” μ„λ²„      |
| **DHCP ν΄λΌμ΄μ–ΈνΈ**         | IP μ£Όμ†λ¥Ό μ”μ²­ν•λ” μ¥μΉ (PC, μ¤λ§νΈν°, λΌμ°ν„° λ“±) |
| **μ„λ€ κΈ°κ°„ (Lease Time)** | ν΄λΌμ΄μ–ΈνΈκ°€ IP μ£Όμ†λ¥Ό μ‚¬μ©ν•  μ μλ” μ‹κ°„        |
| **κ°±μ‹  (Renewal)**       | μ„λ€ μ‹κ°„μ΄ λ§λ£λκΈ° μ „μ— μ£Όμ†λ¥Ό κ³„μ† μ‚¬μ©ν•κΈ° μ„ν• μ”μ²­ |
| **λ°λ‚© (Release)**       | λ” μ΄μƒ IP μ£Όμ†κ°€ ν•„μ” μ—†λ” κ²½μ° λ°ν™ μ μ°¨       |

---

## π“΅ DHCP λ™μ‘ νλ¦„ (DORA ν”„λ΅μ„Έμ¤)

<img src="./images/dhcp_prod.png" width=90% /><br>

DHCPλ” 4λ‹¨κ³„ λ©”μ‹μ§€ κµν™μΌλ΅ κµ¬μ„±λ©λ‹λ‹¤. μ΄ κ³Όμ •μ„ ν”ν **DORA**(Discover β†’ Offer β†’ Request β†’ Ack)λΌκ³  λ¶€λ¦…λ‹λ‹¤.

### π§­ 1. DHCP Discover

| ν•­λ©         | μ„¤λ…                                              |
| ---------- | ----------------------------------------------- |
| **λ°©ν–¥**     | ν΄λΌμ΄μ–ΈνΈ β†’ λΈλ΅λ“μΊμ¤νΈ                                  |
| **MAC μ£Όμ†** | FF\:FF\:FF\:FF\:FF\:FF (λΈλ΅λ“μΊμ¤νΈ)                 |
| **λ©μ **     | β€μ΄ λ„¤νΈμ›ν¬μ— DHCP μ„λ²„ μλ‚μ”?β€ ν΄λΌμ΄μ–ΈνΈκ°€ DHCP μ„λ²„λ¥Ό μ°ΎκΈ° μ„ν•΄ μ”μ²­ |
| **ν•µμ‹¬ μ •λ³΄**  | ν΄λΌμ΄μ–ΈνΈμ MAC μ£Όμ† ν¬ν•¨                                |

π” *DHCP ν΄λΌμ΄μ–ΈνΈλ” μ•„μ§ IP μ£Όμ†λ¥Ό λ¨λ¥΄λ―€λ΅, IPλ„ MACλ„ λΈλ΅λ“μΊμ¤νΈν•΄μ•Ό ν•λ‹¤.*

---

### π“¬ 2. DHCP Offer

| ν•­λ©                               | μ„¤λ…                                 |
| -------------------------------- | ---------------------------------- |
| **λ°©ν–¥**                           | DHCP μ„λ²„ β†’ λΈλ΅λ“μΊμ¤νΈ or μ λ‹μΊμ¤νΈ          |
| **μ΅°κ±΄**                           | ν΄λΌμ΄μ–ΈνΈκ°€ μ„¤μ •ν• Broadcast Flag κ°’μ— λ”°λΌ λ‹¤λ¦„ |
| **λ©μ **                           | DHCP μ„λ²„κ°€ β€λ‚΄κ°€ ν• λ‹Ήν•΄μ¤„ IP μμ–΄μ”\~β€λΌκ³  μ‘λ‹µ   |
| **ν•µμ‹¬ μ •λ³΄**                        |                                    |
| - Your IP                        | μ μ•λ IP μ£Όμ†                          |
| - Subnet Mask (μµμ… 1)             |                                    |
| - Router(Default Gateway, μµμ… 3)  |                                    |
| - DNS μ„λ²„ (μµμ… 6)                  |                                    |
| - Lease Time (μµμ… 51)             |                                    |
| - DHCP Server Identifier (μµμ… 54) |                                    |

π” *μ—¬λ¬ DHCP μ„λ²„κ°€ Offerλ¥Ό λ³΄λ‚Ό μ μμΌλ―€λ΅, ν΄λΌμ΄μ–ΈνΈλ” μ„ νƒν•  μ μμ.*

---

### π™‹β€β™‚οΈ 3. DHCP Request

| ν•­λ©                                                | μ„¤λ…                     |
| ------------------------------------------------- | ---------------------- |
| **λ°©ν–¥**                                            | ν΄λΌμ΄μ–ΈνΈ β†’ λΈλ΅λ“μΊμ¤νΈ         |
| **λ©μ **                                            | νΉμ • DHCP μ„λ²„μ—κ² IP μ„λ€λ¥Ό μ”μ²­ |
| **ν•µμ‹¬ μ •λ³΄**                                         |                        |
| - Requested IP Address (μµμ… 50): μ›ν•λ” IP μ£Όμ†         |                        |
| - DHCP Server Identifier (μµμ… 54): μ„ νƒν• DHCP μ„λ²„μ IP |                        |

π” *DHCP ν΄λΌμ΄μ–ΈνΈλ” λ…μ‹μ μΌλ΅ β€μ΄ IPλ¥Ό μ΄ μ„λ²„λ΅λ¶€ν„° λ°›κ³  μ‹¶μ–΄μ”β€λΌκ³  μ§€μ •ν•λ‹¤.*

---

### β… 4. DHCP Ack

| ν•­λ©                       | μ„¤λ…                            |
| ------------------------ | ----------------------------- |
| **λ°©ν–¥**                   | DHCP μ„λ²„ β†’ λΈλ΅λ“μΊμ¤νΈ or μ λ‹μΊμ¤νΈ     |
| **λ©μ **                   | DHCP μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² IP μ„λ€λ¥Ό μµμΆ… ν™•μ • |
| **ν•µμ‹¬ μ •λ³΄**                |                               |
| - Your IP                |                               |
| - Subnet Mask            |                               |
| - Router                 |                               |
| - DNS                    |                               |
| - Lease Time             |                               |
| - DHCP Server Identifier |                               |

π” *μ΄ λ©”μ‹μ§€λ¥Ό λ°›μ€ ν›„, ν΄λΌμ΄μ–ΈνΈλ” ν•΄λ‹Ή IP μ£Όμ†λ΅ λ„¤νΈμ›ν¬ μ‚¬μ© κ°€λ¥.*

---

## π€ DHCP μ „μ²΄ λ©”μ‹μ§€ μ‹ν€€μ¤ λ‹¤μ΄μ–΄κ·Έλ¨

```
ν΄λΌμ΄μ–ΈνΈ                           DHCP μ„λ²„
   |                                     |
   | -------- DHCP Discover -----------> |  (λΈλ΅λ“μΊμ¤νΈ)
   |                                     |
   | <---------- DHCP Offer -----------  |  (μ λ‹/λΈλ΅λ“μΊμ¤νΈ)
   |                                     |
   | -------- DHCP Request ------------> |  (λΈλ΅λ“μΊμ¤νΈ)
   |                                     |
   | <---------- DHCP Ack -------------- |  (μ λ‹/λΈλ΅λ“μΊμ¤νΈ)
   |                                     |
```

---

## π› οΈ DHCP μ¶”κ°€ κ°λ…

### π”„ IP μ£Όμ† κ°±μ‹  (Renewal)

* ν΄λΌμ΄μ–ΈνΈλ” μ„λ€ μ‹κ°„μ΄ 50% κ²½κ³Όλλ©΄ μ„λ²„μ—κ² **DHCP Request**λ¥Ό ν†µν•΄ κ°±μ‹  μ”μ²­
* μ„λ²„λ” **DHCP Ack**λ΅ μ—°μ¥ μΉμΈ

### π—‘οΈ IP μ£Όμ† λ°λ‚© (Release)

* ν΄λΌμ΄μ–ΈνΈκ°€ λ” μ΄μƒ IPκ°€ ν•„μ” μ—†λ” κ²½μ°, **DHCP Release** λ©”μ‹μ§€ μ „μ†΅

---

## π§  DHCPμ μ¥μ 

* β”οΈ **μλ™ν™”**: λ€κ·λ¨ λ„¤νΈμ›ν¬μ—μ„ IP μ„¤μ •μ„ μλ™μΌλ΅ ν•μ§€ μ•μ•„λ„ λ¨
* β”οΈ **μ¤‘μ•™ κ΄€λ¦¬**: IP, κ²μ΄νΈμ›¨μ΄, DNS λ“±μ„ μ¤‘μ•™ DHCP μ„λ²„μ—μ„ ν†µμ 
* β”οΈ **ν¨μ¨μ  μ£Όμ† κ΄€λ¦¬**: μ ν΄ IP μ£Όμ† νμ λ° μ¬ν• λ‹Ή κ°€λ¥

---

## β οΈ λ³΄μ• μ΄μ

| κ³µκ²© μ ν•           | μ„¤λ…                               |
| --------------- | -------------------------------- |
| DHCP μ¤ν‘Έν•‘        | μ•…μμ μΈ μ„λ²„κ°€ DHCP Offerλ¥Ό λ³΄λ‚΄ IP μ£Όμ† νƒμ·¨ |
| DHCP Starvation | μλ§μ€ DHCP Discoverλ¥Ό λ³΄λ‚΄ IP ν’€ κ³ κ° μ λ„ |

π” **λ³΄μ• λ€μ±…**: DHCP Snooping, ν¬νΈ λ³΄μ•, ACL μ •μ±… λ“± λ„¤νΈμ›ν¬ λ³΄μ• κΈ°λ²•μ„ μ μ©ν•΄μ•Ό ν•¨

---



## π“ μ°Έκ³  μλ£

* [RFC 2131 - Dynamic Host Configuration Protocol (IETF)](https://datatracker.ietf.org/doc/html/rfc2131)
* Cisco Networking Academy μλ£
* Wireshark DHCP ν¨ν‚· λ¶„μ„ μμ 

